<figure id="force-directed-graph"
        #figure
        (click)="store.graph.clearSelection()"
        (contextmenu)="contextMenu(null, $event)"></figure>
<ng-template #nodeMenu let-ref>
  <div class="context-menu" (click)="$event.stopPropagation()">
    <ng-container *ngIf="ref">
      <div (click)="pin(ref)">
        <input id="pinned"
               type="checkbox"
               [checked]="ref.pinned">
        <label for="pinned">Pinned</label>
      </div>
      <hr>
      <div (click)="remove(ref)">Remove</div>
      <hr>
      <div (click)="restart(ref)">Restart from here</div>
      <hr>
    </ng-container>
    <div (click)="toggleTimeline()">
      <input id="timeline"
             type="checkbox"
             [checked]="store.graph.timeline">
      <label for="timeline">Timeline force on X-axis</label>
    </div>
    <hr>
    <div (click)="toggleArrows()">
      <input id="arrows"
             type="checkbox"
             [checked]="store.graph.arrows">
      <label for="timeline">Show from source to response</label>
    </div>
    <hr>
    <div (click)="fullscreen()">Fullscreen</div>
  </div>
</ng-template>
<ng-container *mobxAutorun>
  <a *ngIf="store.graph.unloaded.length"
     class="load-more fake-link"
     (click)="drawMore()">load more</a>
  <br>
  <label class="graph-selected">Selected:</label>
  <app-ref-list [page]="store.graph.selectedPage"
                emptyMessage="Empty selection"
                [pageControls]="false"></app-ref-list>
</ng-container>
