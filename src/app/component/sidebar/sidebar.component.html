<input type="search"
       placeholder="Search"
       [(ngModel)]="searchValue"
       (keydown)="$event.key === 'Enter' && search() || true">
<ng-container *ngIf="account.signedIn">
  <div class="submit-button" routerLink="/submit" [queryParams]="{ tag }">
    Submit Link
  </div>
  <div class="submit-button" routerLink="/submit/text" [queryParams]="{ tag }">
    Submit Text Post
  </div>
</ng-container>
<ng-container *ngIf="account.mod">
  <div class="submit-button" routerLink="/create/ext" [queryParams]="ext ? null : { tag }">
    Create Tag Extension
  </div>
  <div class="submit-button" routerLink="/submit" [queryParams]="{ tag, linkType: 'feed' }">
    Submit Feed
  </div>
  <div class="submit-button" routerLink="/create/user" [queryParams]="{ tag }">
    Create User Permissions
  </div>
</ng-container>
<ng-container *ngIf="account.admin">
  <div class="submit-button" routerLink="/admin/origin/create">
    Replicate Remote Origin
  </div>
</ng-container>

<ng-container *ngIf="queue">
  <div *ngIf="ext?.config?.bounty">
    {{ ext?.config?.bounty }}
  </div>
  <div *ngIf="ext?.config?.maxAge">
    {{ ext?.config?.maxAge }}
  </div>
  <div *ngIf="ext?.config?.approvers?.length">
    Approvers:
    <br>
    <ng-container *ngFor="let a of ext!.config!.approvers!">
      <a [routerLink]="['/tag', a]">
        {{ a }}
      </a>
      <br>
    </ng-container>
  </div>
</ng-container>

<ng-container *ngIf="user">
  <div *ngIf="admin.status.plugins.inbox && !ext?.origin">
    <a routerLink="/submit/dm" [queryParams]="{ to: ext?.tag }">Send Direct Message</a>
  </div>
  <div *ngIf="ext?.config?.subscriptions?.length">
    Subscribed to:
    <br>
    <ng-container *ngFor="let sub of ext!.config!.subscriptions!">
      <a [routerLink]="['/tag', sub]">
        {{ sub }}
      </a>
      <br>
    </ng-container>
  </div>
</ng-container>

<ng-container *ngIf="root">
  <div *ngIf="ext?.config?.sidebar"
       class="md"
       markdown
       [emoji]="!!admin.status.plugins.emoji"
       [katex]="!!admin.status.plugins.latex"
       [katexOptions]="{ throwOnError: false }"
       [data]="ext?.config?.sidebar"></div>

  <ng-container *ngIf="writeAccess$ | async">
    <a *ngIf="ext"
       class="sidebar-edit"
       [routerLink]="['/tag', tag, 'edit']">
      edit
    </a>
  </ng-container>
</ng-container>
