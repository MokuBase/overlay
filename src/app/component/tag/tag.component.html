<div class="tag">
  <a [routerLink]="['/tag', qualifiedTag]">{{ tag.name || tag.tag || 'root' }}</a>
  <span *ngIf="tag.origin" class="host">({{ tag.origin }})</span>
</div>
<div class="stack">
  <div class="info">
    modified {{ tag.modified?.fromNow() }}
  </div>
  <div class="actions">
    <a *ngIf="writeAccess$ | async"
       class="fake-link"
       (click)="editing = true">edit</a>
    <a *ngIf="!deleting && (writeAccess$ | async)"
       class="fake-link"
       (click)="deleting = true">delete</a>
    <span *ngIf="deleting" class="delete-confirm">
        are you sure?
        <a class="fake-link" (click)="delete()">yes</a>
        /
        <a class="fake-link" (click)="deleting = false">no</a>
      </span>
  </div>
</div>

<form *ngIf="editing" class="form" [formGroup]="editForm" (ngSubmit)="save()">

  <label for="name">Name:</label>
  <input type="text" id="name" formControlName="name">

  <ng-container *ngFor="let e of serverError">
    <span><!-- Unexpected Error --></span>
    <div class="error">{{ e }}</div>
  </ng-container>

  <span><!-- Buttons --></span>
  <span>
    <button type="submit" [disabled]="submitted && !editForm.valid">save</button>
    <button (click)="editing = false">cancel</button>
  </span>
</form>

