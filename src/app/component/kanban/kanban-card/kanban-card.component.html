<div class="row">
  <ng-container *ngIf="thumbnail">
    <div class="thumbnail"
         *ngIf="thumbnailUrl else defaultThumbnail"
         [style.background-image]="[repostRef, ref] | thumbnail | async"
         [style.border-radius]="thumbnailRadius">{{ thumbnailEmoji }}</div>
    <ng-template #defaultThumbnail>
      <div class="thumbnail"
           [class.default-thumbnail]="!thumbnailColor && !thumbnailEmoji"
           [style.background-color]="thumbnailColor"
           [style.border-radius.px]="thumbnailRadius">{{ thumbnailEmoji }}</div>
    </ng-template>
  </ng-container>
  <a class="card-title grow" [routerLink]="['/ref', ref.url]">{{ title }}</a>
  <ng-container *ngIf="badgeExts$ | async as tagExts; else tagNoExts">
    <div class="badges" *ngFor="let e of tagExts">
      <a class="tag badge" [routerLink]="['/tag', e.tag]">{{ e.name || e.tag }}</a>
    </div>
  </ng-container>
  <ng-template #tagNoExts>
    <div class="badges" *ngFor="let t of badges">
      <a class="tag badge" [routerLink]="['/tag', t]">{{ t }}</a>
    </div>
  </ng-template>
</div>
<app-md *ngIf="currentText"
        [origin]="ref.origin || ''"
        [plugins]="ref.tags || []"
        [text]="currentText"></app-md>
