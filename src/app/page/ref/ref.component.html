<div class="tabs">
  <ng-container *ngIf="admin.status.plugins.comment">
    <a [routerLink]="['../', (url$ | async), 'comments']" routerLinkActive="current-tab">comments</a>
  </ng-container>
  <a [routerLink]="['../', (url$ | async), 'responses']" routerLinkActive="current-tab">responses</a>
  <a [routerLink]="['../', (url$ | async), 'sources']" routerLinkActive="current-tab">sources</a>
  <ng-container *ngIf="admin.status.plugins.graph">
    <a [routerLink]="['../', (url$ | async), 'graph']" [queryParams]="{ hideSearch: true }" routerLinkActive="current-tab">graph</a>
  </ng-container>
  <div class="spacer"></div>
  <app-settings></app-settings>
</div>
<app-search-filter *ngIf="!(hideSearch$ | async)" style="float: right"></app-search-filter>
<div style="display: grid" *ngIf="!error; else errorMessage">
  <ng-container *ngIf="ref$ | async as ref; else loading">
    <app-ref [ref]="ref"
             [showToggle]="true"
             [expandInline]="true"
             [expanded]="expandedByDefault"></app-ref>
  </ng-container>
  <ng-template #loading>
    <app-loading></app-loading>
  </ng-template>
  <router-outlet></router-outlet>
</div>
<ng-template #errorMessage>
  <div *ngIf="error!.status === 404" class="error-404">Not Found</div>
  <div *ngIf="error!.status !== 404" class="error">{{ printError(error!) }}</div>
</ng-template>
