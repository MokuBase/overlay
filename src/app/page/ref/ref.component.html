<div class="tabs">
  <a *ngIf="admin.status.plugins.comment"
     [routerLink]="['../', (url$ | async), 'comments']"
     routerLinkActive="current-tab">
    comments
  </a>
  <a [routerLink]="['../', (url$ | async), 'responses']" routerLinkActive="current-tab">responses</a>
  <a [routerLink]="['../', (url$ | async), 'sources']" routerLinkActive="current-tab">sources</a>
  <a [routerLink]="['../', (url$ | async), 'graph']" routerLinkActive="current-tab">graph</a>
  <ng-container *ngIf="admin.status.plugins.comment && account.mod">
    <a [routerLink]="['../', (url$ | async), 'comments', 'modlist']" routerLinkActive="current-tab">comment modlist</a>
  </ng-container>
  <ng-container *ngIf="account.mod">
    <a [routerLink]="['../', (url$ | async), 'responses', 'modlist']" routerLinkActive="current-tab">response modlist</a>
    <a [routerLink]="['../', (url$ | async), 'sources', 'modlist']" routerLinkActive="current-tab">source modlist</a>
  </ng-container>
  <div class="spacer"></div>
  <app-settings></app-settings>
</div>
<ng-container *ngIf="!error; else errorMessage">
  <ng-container *ngIf="ref$ | async as ref; else loading">
    <app-ref [ref]="ref"
             [showToggle]="true"
             [expanded]="true"></app-ref>
  </ng-container>
  <ng-template #loading>
    <app-loading></app-loading>
  </ng-template>
  <router-outlet></router-outlet>
</ng-container>
<ng-template #errorMessage>
  <div *ngIf="error!.status === 404" class="error-404">Not Found</div>
  <div *ngIf="error!.status !== 404" class="error">{{ printError(error!) }}</div>
</ng-template>
